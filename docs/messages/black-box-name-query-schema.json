{
  "id": "ropod-cmd-schema.json",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title" : "Black Box Name Query Schema",
  "description": "Find the names of all black boxes",
  "type": "object",

  "properties":
  {
    "header":
    {
      "allOf":
      [
        { "$ref": "ropod-msg-schema.json#/definitions/header" },
        { "$ref": "#/definitions/header" }
      ]
    },

    "payload":
    {
      "allOf":
      [
        { "$ref": "ropod-msg-schema.json#/definitions/payload" },
        { "$ref": "#/definitions/bbNameQueryPayload" }
      ]
    }
  },

  "required": [ "header" ],
  "additionalProperties": true,

  "definitions":
  {
    "header":
    {
      "type": "object",
      "description": "More specific definition (than the definition of ropod-msg-schema.json). Only the type field is further specified.",
      "properties":
      {
        "type": { "enum": [ "NAME-QUERY" ] }
      },
      "required": [ "type"],
      "additionalProperties": true
    },

    "bbNameQueryPayload":
    {
      "type": "object",
      "description": "Data associated with a black box name query (e.g. who is requesting the data).",
      "properties":
      {
        "senderId":   { "$ref": "#/definitions/senderId" }
      },
      "required": [ "senderId" ],
      "additionalProperties": false
    },

    "senderId":
    {
      "description": "ID uniquely specifying the client that requests black box names."
    }
  }
}
